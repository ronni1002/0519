<!-- Styles -->
<style>
#chartdiv {
  width: 100%;
  height: 500px;
}
</style>

<!-- Resources -->
<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
<script src="https://cdn.amcharts.com/lib/4/plugins/timeline.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>

<!-- Chart code -->
<script>
am4core.ready(function() {

// Themes begin
am4core.useTheme(am4themes_animated);
// Themes end

var chart = am4core.create("chartdiv", am4plugins_timeline.CurveChart);
chart.curveContainer.padding(0, 100, 0, 120);
chart.maskBullets = false;

var colorSet = new am4core.ColorSet();

chart.data = [
  {
    "category": "",
    "year": "1954",
    "size": 1,
    "text": "李安出生",
    "desc": ""
  }, 

  {
    "category": "",
    "year": "1973",
    "size": 1,
    "text": "戲劇和藝術興趣的萌芽",
    "desc": "於國立台灣藝術專科學校就讀影視科，1975年畢業，就讀藝專期間，李安受到了電影《處女之泉》、《畢業生》、《單車失竊記）及《慾海含羞花》的深遠影響，並對戲劇和藝術產生興趣"
  }, 

  {
    "category": "",
    "year": "1979",
    "size": 1,
    "text": "赴美留學",
    "desc": "李安在服完兵役之後，依照父親原有的計劃前往美國就讀伊利諾大學香檳分校戲劇系，並在1980年順利取得藝術學士學位"
  }, 

  {
    "category": "",
    "year": "1980",
    "size": 1,
    "text": "攻讀碩士",
    "desc": "攻讀紐約大學電影製作研究所，於1984年取得碩士學位。李安在就讀紐約大學期間於完成了短片《蔭涼湖畔》（1982年），該片榮獲臺灣金穗獎最佳劇情短片獎，1984年，李安拍出了他的畢業作品《分界線》，獲得紐約大學影展的最佳導演獎及最佳影片獎"
  },

  {
    "category": "",
    "year": "1983",
    "size": 1,
    "text": "與林惠嘉女士結婚",
    "desc": "兩人育有二子，分別是長子李涵（1984年）與次子李淳（1990年）"
  },

  {
    "category": "",
    "year": "1990",
    "size": 1,
    "text": "導演生涯的開端",
    "desc": "李安在1990年創作了兩份劇本，分別是《推手》和《囍宴》，並在中華民國行政院新聞局主辦的比賽中獲得優良電視劇本首獎及二獎的肯定。李安的獲獎劇本引起當時擔任中央電影公司副總經理徐立功的注意。徐立功邀請李安拍攝《推手》（1991年）。從此之後，李安正式開啓了導演生涯。"
  },

  {
    "category": "",
    "year": "1993",
    "size": 1,
    "text": "《囍宴》出品",
    "desc": "首度贏得柏林電影節金熊獎、金馬獎最佳影片及最佳導演獎，也入圍金球獎和奧斯卡獎最佳外語片獎，促使李安成為臺灣電影界的後起之秀。"
  },

  {
  "category": "",
    "year": "1994",
    "size": 1,
    "text": "《飲食男女》出品",
    "desc": "連續兩年同時在金球獎和奧斯卡獎獲得最佳外語片的提名，同時也首次入圍英國電影和電視藝術學院獎。《飲食男女》在臺灣和國際上總共奪得五個獎項，包括獨立精神獎最佳導演獎。"
  },

  {
  "category": "",
    "year": "1995",
    "size": 1,
    "text": "《理性與感性》出品",
    "desc": "《理性與感性》也在金球獎與英國電影和電視藝術學院獎分別入獲得5項與3項大獎，最終獲得金球獎最佳戲劇片獎與英國電影和電視藝術學院獎最佳影片獎"
  },

  {
  "category": "",
    "year": "2000",
    "size": 1,
    "text": "《臥虎藏龍》出品",
    "desc": "獲得奧斯卡獎10項入圍（包括最佳影片獎、最佳外語片獎與最佳導演獎），最終獲得最佳外語片獎及三個技術獎項。"
  },

  {
  "category": "",
    "year": "2003",
    "size": 1,
    "text": "事業低谷期-《綠巨人浩克》出品",
    "desc": "這部影片得到的評價相當兩極，成為一部不是很成功的電影，票房收入只有2.45億美元。在遭遇這次挫折之後，李安考慮提前退休，但是他的父親則鼓勵他繼續拍攝電影，於是李安最終打消退休的念頭"
  },

  {
  "category": "",
    "year": "2005",
    "size": 1,
    "text": "《斷背山》出品",
    "desc": "這部電影在大型國際電影節廣受好評並在世界各地榮獲許多最佳影片獎和最佳導演獎，，成為第一位獲此殊榮的亞洲人，也是首位獲得該獎項的黃種人。《斷背山》是2005年最受讚譽的影片，總共贏得71個獎項，另外還有52個提名。"
  },

  {
  "category": "",
    "year": "2007",
    "size": 1,
    "text": "《色，戒》出品",
    "desc": "這部電影在大型國際電影節廣受好評並在世界各地榮獲許多最佳影片獎和最佳導演獎，，成為第一位獲此殊榮的亞洲人，也是首位獲得該獎項的黃種人。《斷背山》是2005年最受讚譽的影片，總共贏得71個獎項，另外還有52個提名。"
  },

  {
  "category": "",
    "year": "2007",
    "size": 1,
    "text": "《色，戒》出品",
    "desc": "色戒在第44屆金馬獎上也大放異彩，獲得七項大獎成為當屆最大贏家，也在金馬獎獲得最佳影片獎與最佳導演獎。"
  },
  {
  "category": "",
    "year": "2011",
    "size": 1,
    "text": "《少年Pi的奇幻漂流》出品",
    "desc": "李安首次拍攝3D電影。"
  },
   {
  "category": "",
    "year": "2016",
    "size": 1,
    "text": "《比利·林恩的中場戰事》出品",
    "desc": ""
  },
   {
  "category": "",
    "year": "2017",
    "size": 1,
    "text": "接任下屆金馬執委會主席",
    "desc": ""
  },
   {
  "category": "",
    "year": "2019",
    "size": 1,
    "text": "《雙子殺手》出品",
    "desc": ""
  },
  {
  "category": "",
    "year": "2021",
    "size": 1,
    "text": "獲得英國電影學院獎終身成就獎。",
    "desc": "由英國電影和電視藝術學院宣布"
  }

];

chart.dateFormatter.inputDateFormat = "yyyy";

chart.fontSize = 12;
chart.tooltipContainer.fontSize = 18;

var categoryAxis = chart.yAxes.push(new am4charts.CategoryAxis());
categoryAxis.dataFields.category = "category";
categoryAxis.renderer.grid.template.disabled = true;

var dateAxis = chart.xAxes.push(new am4charts.DateAxis());
dateAxis.renderer.points = [{ x: -400, y: 0 }, { x: 0, y: 50 }, { x: 400, y: 0 }]
dateAxis.renderer.polyspline.tensionX = 0.8;
dateAxis.renderer.grid.template.disabled = true;
dateAxis.renderer.line.strokeDasharray = "1,4";
dateAxis.baseInterval = {period:"day", count:1}; // otherwise initial animation will be not smooth

dateAxis.renderer.labels.template.disabled = true;

var series = chart.series.push(new am4plugins_timeline.CurveLineSeries());
series.strokeOpacity = 0;
series.dataFields.dateX = "year";
series.dataFields.categoryY = "category";
series.dataFields.value = "size";
series.dataFields.desc = "desc";
series.baseAxis = categoryAxis;

var interfaceColors = new am4core.InterfaceColorSet();

series.tooltip.pointerOrientation = "down";

var distance = 80;
var angle = 70;

var bullet = series.bullets.push(new am4charts.Bullet());

var line = bullet.createChild(am4core.Line);
line.adapter.add("stroke", function(fill, target) {
  if (target.dataItem) {
    return chart.colors.getIndex(target.dataItem.index)
  }
});

line.x1 = 0;
line.y1 = 0;
line.y2 = 0;
line.x2 = distance - 10;
line.strokeDasharray = "1,3";

var circle = bullet.createChild(am4core.Circle);
circle.radius = 30;
circle.fillOpacity = 1;
circle.strokeOpacity = 0;

var circleHoverState = circle.states.create("hover");
circleHoverState.properties.scale = 1.5;

series.heatRules.push({ target: circle, min: 20, max: 20, property: "radius" });
circle.adapter.add("fill", function(fill, target) {
  if (target.dataItem) {
    return chart.colors.getIndex(target.dataItem.index)
  }
});
circle.tooltipText = "{text}\n{desc}";
circle.adapter.add("tooltipY", function(tooltipY, target){
  return -target.pixelRadius - 4;
});

var yearLabel = bullet.createChild(am4core.Label);
yearLabel.text = "{year}";
yearLabel.strokeOpacity = 0;
yearLabel.fill = am4core.color("#fff");
yearLabel.horizontalCenter = "middle";
yearLabel.verticalCenter = "middle";
yearLabel.interactionsEnabled = false;

var label = bullet.createChild(am4core.Label);
label.propertyFields.text = "text";
label.strokeOpacity = 0;
label.horizontalCenter = "right";
label.verticalCenter = "middle";

label.adapter.add("opacity", function(opacity, target) {
  if(target.dataItem){
    var index = target.dataItem.index;
    var line = target.parent.children.getIndex(0);

    if (index % 2 == 0) {
      target.y = -distance * am4core.math.sin(-angle);
      target.x = -distance * am4core.math.cos(-angle);
      line.rotation = -angle - 180;
      target.rotation = -angle;
    }
    else {
      target.y = -distance * am4core.math.sin(angle);
      target.x = -distance * am4core.math.cos(angle);
      line.rotation = angle - 180;
      target.rotation = angle;
    }
  }
  return 1;
});

var outerCircle = bullet.createChild(am4core.Circle);
outerCircle.radius = 50;
outerCircle.fillOpacity = 0;
outerCircle.strokeOpacity = 0;
outerCircle.strokeDasharray = "1,3";

var hoverState = outerCircle.states.create("hover");
hoverState.properties.strokeOpacity = 0.8;
hoverState.properties.scale = 1.5;

outerCircle.events.on("over", function(event){
  var circle = event.target.parent.children.getIndex(1);
  circle.isHover = true;
  event.target.stroke = circle.fill;
  event.target.radius = circle.pixelRadius;
  event.target.animate({property: "rotation", from: 0, to: 360}, 4000, am4core.ease.sinInOut);
});

outerCircle.events.on("out", function(event){
  var circle = event.target.parent.children.getIndex(1);
  circle.isHover = false;
});

chart.scrollbarX = new am4core.Scrollbar();
chart.scrollbarX.opacity = 0.5;
chart.scrollbarX.width = am4core.percent(50);
chart.scrollbarX.align = "center";

}); // end am4core.ready()
</script>

<!-- HTML -->
<div id="chartdiv"></div>